coord_polar("y", start=0)
# Bar plot
ggplot(df1, aes(x=  descrip   , y=total)) +
geom_bar(stat = "identity")
# Bar plot order
ggplot(df1, aes(x=  reorder(descrip, -total)   , y=total)) +
geom_bar(stat = "identity")
##################
df2 <- df %>% filter(presunto != 8 ) %>% group_by(anio_cert, presunto) %>% summarise( total = n())
# df2 <- df2 %>% spread(key= anio_cert, value = total) # Hacer larga la tabla
df2 <- merge(df2, cat_presunto, by.x = 'presunto', by.y = 'cve' )
df2 <- df2 %>% filter(anio_cert != 2014)
view(df2)
# Plot
df2 %>%
ggplot( aes(x= anio_cert, y= total, group= descrip, color=descrip)) +
geom_line()
# ¿qué más podemos saber?
#### Por sexo
cat_presunto
df3 <- df %>% filter(presunto == 2 ) %>%
group_by(sexo) %>% summarise( total = n())
df3 <- merge(df3, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df3 <- df3 %>% mutate( sexo = descrip) %>% select(-descrip)
df3
## plot
ggplot(df3, aes(x='', y= total, fill= sexo)) +
geom_bar(stat="identity", width=1) +
coord_polar("y", start=0)
### Sexo y causa
df3 <- df %>% filter(presunto == 3 ) %>%
group_by(causa_def, sexo) %>% summarise( total = n())
df3
df3 <- merge(df3, cat_causa, by.x = 'causa_def', by.y = 'cve' )
df3 <- df3 %>% mutate( causa_def = descrip) %>% select(-descrip)
df3 <- merge(df3, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df3 <- df3 %>% mutate( sexo = descrip) %>% select(-descrip)
df3 <- df3 %>% arrange( -total)
head(df3)
df3 <- df3 %>% spread( key = sexo, value = total)
df3
view(df3)
### Edad
# Nota para Isaías, revisa si puedes sacar las edades con categorías
# Suicidio por edades
df5 <- df %>% select( presunto, edad, sexo, anio_cert) %>%
filter(edad > 4000) %>%
filter(presunto == 3, edad != 4998 ) %>%
mutate( edad =  edad - 4000  )
df5 <- merge(df5, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df5  <- df5  %>% mutate( sexo = descrip) %>% select(-descrip)
## Histograma
ggplot(df5, aes(x=edad)) +
geom_histogram()
mean(df5$edad)
median(df5$edad)
# Caja y bigotes
ggplot(df5, aes(x=edad, fill= as.factor(anio_cert))) +
geom_boxplot()
ggplot(df5, aes(x=edad, fill= as.factor(sexo))) +
geom_boxplot() + facet_wrap(~anio_cert)
### violin
ggplot(df5, aes(x=edad, y= as.factor(anio_cert))) +
geom_violin() + facet_wrap(~sexo)
#######
df6 <- df %>% filter(edad > 4000) %>%
filter(presunto == 3, edad != 4998 ) %>%
mutate( edad =  edad - 4000  ) %>%
group_by(edad) %>% summarise( total = n())
df6
ggplot(df6, aes(x=edad, y=total)) +
geom_bar(stat = "identity")
df$vio_fami
# mostrar los que tenemos
catalogos
cat_edad <- sel_cat(35)
cat_edad <- sel_cat(13)
cat_v_fam <- sel_cat(35)
cat_v_fam
# mostrar los que tenemos
catalogos
cat_v_fam <- sel_cat(36)
cat_v_fam
df8 <- df %>% group_by(vio_fami) %>% summarise( total = n())
df8
df$lugar_ocur
df$par_agre
# mostrar los que tenemos
catalogos
cat_parent <- sel_cat(29)
df0 <- df %>% group_by(causa_def, anio_cert) %>% summarise( total = n())
cat_parent
view(cat_parent)
df8 <- df %>% group_by(par_agre) %>% summarise( total = n())
df8
df8 <- df %>% group_by(par_agre) %>% summarise( total = n()) %>% arrange(-total)
df8
df8 <- df  %>% filter(presunto != 8 ) %>%
group_by(par_agre) %>% summarise( total = n()) %>% arrange(-total)
df8
df8 <- df  %>% filter(presunto != 2 ) %>%
group_by(par_agre) %>% summarise( total = n()) %>% arrange(-total)
df8
df8 <- df  %>% filter(presunto == 2 ) %>%
group_by(par_agre) %>% summarise( total = n()) %>% arrange(-total)
df8
# mostrar los que tenemos
catalogos
cat_l_ocur <- sel_cat(22)
cat_l_ocur
cat_l_ocur
df
cat_presunto
df9 <- df  %>% filter(presunto != 8 ) %>%
group_by( lugar_ocur) %>% summarise( total = n()) %>% arrange(-total)
df9
cat_l_ocur
library(tidyverse)
library(janitor)
library(ggplot2)
filename =  '/home/isaias/analisis_datos/mortalidad_inegi/datos/datos_limpios/conapo_15_21.csv'
df <- read_csv( filename, locale = readr::locale(encoding = "latin1"))
# Catálogo edad
catalogos <-list.files(path = "/home/isaias/analisis_datos/mortalidad_inegi/catalogos/",
pattern = "*.csv")
# mostrar los que tenemos
catalogos
# Elegir uno
sel_cat <- function(nom_cat ) {
catalogo <- catalogos[nom_cat]
file_cat <- paste0('/home/isaias/analisis_datos/mortalidad_inegi/catalogos/', catalogo)
df_cat <-  read_csv(file_cat, locale = readr::locale(encoding = "latin1") )
df_cat <- clean_names(df_cat)
}
cat_causa <- sel_cat(5)
cat_presunto <- sel_cat(30)
cat_sexo <- sel_cat(33)
cat_edad <- sel_cat(13)
cat_v_fam <- sel_cat(36)
cat_parent <- sel_cat(29)
cat_l_ocur <- sel_cat(22)
cat_presunto
df %>% filter(presunto == 2) %>%
group_by(causa_def, anio_cert) %>% summarise( total = n())
df %>% filter(presunto == 2) %>%
group_by(causa_def, anio_cert, sexo) %>% summarise( total = n())
df0 <- df %>% filter(presunto == 2) %>%
group_by(causa_def, anio_cert, sexo) %>% summarise( total = n())
df0 <- merge(df0, cat_causa, by.x = 'causa_def', by.y = 'cve' )
df0 <- df0 %>% mutate( causa_def = descrip) %>% select(-descrip)
df0
df0
df0 <- df %>% filter(presunto == 2) %>%
group_by(causa_def, anio_cert, sexo) %>% summarise( total = n())
df0 <- merge(df0, cat_causa, by.x = 'causa_def', by.y = 'cve' )
df0
head(df0)
df0 <- merge(df0, cat_causa, by.x = 'causa_def', by.y = 'cve' )
df0 <- df0 %>% mutate( causa_def = descrip) %>% select(-descrip)
df0 <- df %>% filter(presunto == 2) %>%
group_by(causa_def, anio_cert, sexo) %>% summarise( total = n())
df0 <- merge(df0, cat_causa, by.x = 'causa_def', by.y = 'cve' )
df0 <- df0 %>% mutate( causa_def = descrip) %>% select(-descrip)
df0
head(df0)
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df0 %>% mutate( sexo = descrip) %>% select(-descrip)
df0
head(df0)
df0 <- df %>% filter(presunto == 2) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>% summarise( total = n())
df0 <- merge(df0, cat_causa, by.x = 'causa_def', by.y = 'cve' )
df0 <- df0 %>% mutate( causa_def = descrip) %>% select(-descrip)
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df0 %>% mutate( sexo = descrip) %>% select(-descrip)
df0 <- df %>% filter(presunto == 2) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>% summarise( total = n())
df0 <- merge(df0, cat_causa, by.x = 'causa_def', by.y = 'cve' )
df0 <- df0 %>% mutate( causa_def = descrip) %>% select(-descrip)
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df %>% filter(presunto == 2) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>% summarise( total = n())
df0 <- df0 %>% mutate( causa_def = descrip) %>% select(-descrip)
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df0 %>% mutate( sexo = descrip) %>% select(-descrip)
head(df0)
df0 <- df %>% filter(presunto == 2) %>%
group_by(ent_ocurr, anio_cert, mun_ocurr,  anio_cert, sexo) %>% summarise( total = n())
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df %>% filter(presunto == 2) %>%
group_by(ent_ocurr, anio_cert, mun_ocurr,  anio_cert, sexo) %>% summarise( total = n())
df0 <- df %>% filter(presunto == 2) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>% summarise( total = n())
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df0 %>% mutate( sexo = descrip) %>% select(-descrip)
head(df0)
cat_presunto[2]
df0 <- df %>% filter(presunto == 2) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>%
summarise( total = n()) %>% mutate( anio_lab =  paste0( 'ss_' anio_cert, '_homi_' ) )
df0 <- df %>% filter(presunto == 2) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_homi_' ) )
df0
df0
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0
df0 <- df0 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  )
df0
df0 %>% spread( key =  anio_lab, value = total)
df0 <- df %>% filter(presunto == 2) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_homi_' ) )
df0
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df0 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert))
df0 %>% spread( key =  anio_lab, value = total)
df0 <- df %>% filter(presunto == 2) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_homi_' ) )
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df0 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df0 %>% spread( key =  anio_lab, value = total)
df0 <- df %>% filter(presunto == 2) %>% filter(anio_cert != 2014) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_homi_' ) )
df0
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df0 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df0 %>% spread( key =  anio_lab, value = total)
df0 <- df0 %>% spread( key =  anio_lab, value = total) %>% clean_names()
head(df0)
df1 <- df %>% filter(presunto == 3) %>% filter(anio_cert != 2014) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_homi_' ) )
df1
df1 <- merge(df1, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df1 <- df1 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df1 <- df1 %>% spread( key =  anio_lab, value = total) %>% clean_names()
head(df1)
df1 <- df %>% filter(presunto == 3) %>% filter(anio_cert != 2014) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_suic_' ) )
df1
df1 <- merge(df1, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df1 <- df1 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df1 <- df1 %>% spread( key =  anio_lab, value = total) %>% clean_names()
head(df1)
df1 <- df %>% filter(presunto == 3) %>% filter(anio_cert != 2014) %>%
group_by(ent_ocurr, anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_suic_' ) )
df1
df1 <- merge(df1, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df1 <- df1 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df1 <- df1 %>% spread( key =  anio_lab, value = total) %>% clean_names()
head(df1)
df0 <- df %>% filter(presunto == 2) %>% filter(anio_cert != 2014) %>%
group_by(ent_ocurr,   anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_homi_' ) )
df0
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df0 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df0 <- df0 %>% spread( key =  anio_lab, value = total) %>% clean_names()
head(df0)
library(tidyverse)
library(janitor)
library(ggplot2)
filename =  '/home/isaias/analisis_datos/mortalidad_inegi/datos/datos_limpios/conapo_15_21.csv'
df <- read_csv( filename, locale = readr::locale(encoding = "latin1"))
# Catálogo edad
catalogos <-list.files(path = "/home/isaias/analisis_datos/mortalidad_inegi/catalogos/",
pattern = "*.csv")
# mostrar los que tenemos
catalogos
# Elegir uno
sel_cat <- function(nom_cat ) {
catalogo <- catalogos[nom_cat]
file_cat <- paste0('/home/isaias/analisis_datos/mortalidad_inegi/catalogos/', catalogo)
df_cat <-  read_csv(file_cat, locale = readr::locale(encoding = "latin1") )
df_cat <- clean_names(df_cat)
}
cat_causa <- sel_cat(5)
cat_presunto <- sel_cat(30)
cat_sexo <- sel_cat(33)
cat_edad <- sel_cat(13)
cat_v_fam <- sel_cat(36)
cat_parent <- sel_cat(29)
cat_l_ocur <- sel_cat(22)
library(tidyverse)
library(janitor)
library(ggplot2)
# 1. Carga de archivos
# 2. Filtrado de columnas
# 3. Armar agregados por estado y municipio
# 4. Exportar tablas
filename =  '/home/isaias/analisis_datos/mortalidad_inegi/datos/datos_limpios/conapo_15_21.csv'
df <- read_csv( filename, locale = readr::locale(encoding = "latin1"))
# Catálogo edad
catalogos <-list.files(path = "/home/isaias/analisis_datos/mortalidad_inegi/catalogos/",
pattern = "*.csv")
# mostrar los que tenemos
catalogos
# Elegir uno
sel_cat <- function(nom_cat ) {
catalogo <- catalogos[nom_cat]
file_cat <- paste0('/home/isaias/analisis_datos/mortalidad_inegi/catalogos/', catalogo)
df_cat <-  read_csv(file_cat, locale = readr::locale(encoding = "latin1") )
df_cat <- clean_names(df_cat)
}
cat_causa <- sel_cat(5)
cat_presunto <- sel_cat(30)
cat_sexo <- sel_cat(33)
cat_edad <- sel_cat(13)
cat_v_fam <- sel_cat(36)
cat_parent <- sel_cat(29)
cat_l_ocur <- sel_cat(22)
df0 <- df %>% filter(presunto == 2) %>% filter(anio_cert != 2014) %>%
group_by(ent_ocurr,   anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_homi_' ) )
df0
df0
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df0 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df0
df0 <- df0 %>% spread( key =  anio_lab, value = total) %>% clean_names()
head(df0)
df1 <- df %>% filter(presunto == 3) %>% filter(anio_cert != 2014) %>%
group_by(ent_ocurr, anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_suic_' ) )
df1
df1 <- merge(df1, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df1 <- df1 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df1 <- df1 %>% spread( key =  anio_lab, value = total) %>% clean_names()
head(df1)
df1 %>% replace_na(0)
df1[is.na(df1)] <- 0
df1
head(df0)
df0[is.na(df0)] <- 0
df0
head(df0)
merge(df0, df1, by = 'ent_ocurr'  )
filename =  '/home/isaias/proyectos/vcmn/entropia_vcmn/datos/estatal/ss_defun_estatal.csv'
write_csv(df_estatal, filename)
df_estatal <- merge(df0, df1, by = 'ent_ocurr'  )
write_csv(df_estatal, filename)
df0 <- df %>% filter(presunto == 2) %>% filter(anio_cert != 2014) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_homi_' ) )
df0
df0 <- merge(df0, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df0 <- df0 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df0 <- df0 %>% spread( key =  anio_lab, value = total) %>% clean_names()
head(df0)
df0[is.na(df0)] <- 0
df0
df1 <- df %>% filter(presunto == 3) %>% filter(anio_cert != 2014) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_suic_' ) )
df1
df1 <- merge(df1, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df1 <- df1 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df1 <- df1 %>% spread( key =  anio_lab, value = total) %>% clean_names()
head(df1)
df1[is.na(df1)] <- 0
df1
df
df1 <- df %>% filter(presunto == 3) %>% filter(anio_cert != 2014) %>%
group_by(ent_ocurr, mun_ocurr,  anio_cert, sexo) %>%
summarise( total = n()) %>%
mutate( anio_lab =  paste0( 'ss_', anio_cert, '_suic_' ) )
df1
df1 <- merge(df1, cat_sexo, by.x = 'sexo', by.y = 'cve' )
df1
df1 <- df1 %>% mutate( sexo = descrip,
anio_lab =  paste0( anio_lab, substr(sexo, 1,1)  )  ) %>%
select(-c(sexo, anio_cert, descrip))
df1
df1 <- df1 %>% spread( key =  anio_lab, value = total) %>% clean_names()
head(df1)
df1[is.na(df1)] <- 0
df1
df1 %>% group_by(ent_ocurr) %>% summarise( sum(ss_2015_suic_h))
df_estatal
unique(df1$mun_ocurr)
table(unique(df1$mun_ocurr))
sum(table(unique(df1$mun_ocurr)))
sum(table(unique(df0$mun_ocurr)))
df_mpal <- merge(df0, df1, by = c('ent_ocurr', mun_ocurr)  )
df_mpal <- merge(df0, df1, by = c('ent_ocurr', 'mun_ocurr')  )
df_mpal
sum(table(unique(df_mpal$mun_ocurr)))
sum(table(unique(df1$mun_ocurr)))
sum(table(unique(df0$mun_ocurr)))
df_mpal <- merge(df0, df1, by = c('ent_ocurr', 'mun_ocurr') , all.x = T )
df_mpal
sum(table(unique(df_mpal$mun_ocurr)))
df_mpal
df1 %>% group_by(ent_ocurr) %>% summarise( sum(ss_2015_homi_h))
df1
df1 %>% group_by(ent_ocurr) %>% summarise( sum(ss_2015_homi_h))
df1
df0 %>% group_by(ent_ocurr) %>% summarise( sum(ss_2015_homi_h))
df_estatal
df_mpal
filename =  '/home/isaias/proyectos/vcmn/entropia_vcmn/datos/municipal/ss_defun_mpal.csv'
write_csv(df_mpal, filename)
library(tidyverse)
library(janitor)
library(ggplot2)
filename =  '/home/isaias/analisis_datos/mortalidad_inegi/datos/datos_limpios/conapo_15_21.csv'
df <- read_csv( filename, locale = readr::locale(encoding = "latin1"))
df
# Catálogo edad
catalogos <-list.files(path = "/home/isaias/analisis_datos/mortalidad_inegi/catalogos/",
pattern = "*.csv")
# mostrar los que tenemos
catalogos
# Elegir uno
sel_cat <- function(nom_cat ) {
catalogo <- catalogos[nom_cat]
file_cat <- paste0('/home/isaias/analisis_datos/mortalidad_inegi/catalogos/', catalogo)
df_cat <-  read_csv(file_cat, locale = readr::locale(encoding = "latin1") )
df_cat <- clean_names(df_cat)
}
cat_ent_mpio <- sel_cat(14)
remove <- c ('33', '34', '35', '36', '88',  '37', '99')
cat_ent <- cat_ent_mpio %>% filter( cve_loc == '0000' & cve_mun != '999' & !(cve_ent %in% remove))
cat_ent
cat_ent
a <- cat_ent %>% group_by(cve_ent) %>% summarise()
view(a)
sum(table(unique(cat_ent)))
cat_ent %>%
sum(table(unique(cat_ent)))
cat_ent %>% group_by( cve_ent, cve_mun) %>% summarise(n ())
cat_ent %>% group_by( cve_ent, cve_mun) %>% summarise()
b <- cat_ent %>% group_by( cve_ent, cve_mun) %>% summarise()
b
b %>% group_by(cve_ent, cve_mun) %>% summarise(n())
b %>% group_by(cve_ent) %>% summarise(n())
b <- b %>% group_by(cve_ent) %>% summarise(n())
view(b)
view(a)
b %>% group_by(cve_ent) %>% summarise(n())
view(b)
sum(table(unique(cat_ent)))
b <- cat_ent %>% group_by( cve_ent, cve_mun) %>% summarise()
b <- b %>% group_by(cve_ent) %>% summarise(tot_mun = n())
b
sum(b$tot_mun)
view(b)
df_conapo <- read_csv(  'conapo_mpios.csv')
df_conapo$v_conapo <- 1
conapo_ent <-  df_conapo %>% group_by( cve_ent, nom_ent2) %>% summarise( conapo  = n())
tail(conapo_ent, 15)
cat_ent
cat_ent_mpio <- sel_cat(14)
remove <- c ('33', '34', '35', '36', '88',  '37', '99')
cat_ent <- cat_ent_mpio %>% filter( cve_loc == '0000' & cve_mun != '999' & !(cve_ent %in% remove))
cat_ent
cat_ent %>% group_by(cve_ent, cve_ent, nom_loc) %>% summarise()
cat_ent %>% group_by(cve_ent, cve_mun, nom_loc) %>% summarise()
cat_ent <- cat_ent_mpio %>%
filter( cve_loc == '0000' & cve_mun != '999' & !(cve_ent %in% remove)) %>%
group_by(cve_ent, cve_mun, nom_loc) %>% summarise()
cat_ent
df
df_mpios <- df %>% group_by( ent_regis, mun_regis ) %>% summarise()
df_mpios
library(tidyverse)
library(janitor)
setwd ('/home/isaias/analisis_datos/sesnsp_monitoreo/data')
# Lectura de archivo comprimido
file_zip <- unz( '/home/isaias/analisis_datos/sesnsp_monitoreo/data/data_original/Municipal-Delitos-2015-2022_jun2022.zip',
'Municipal-Delitos-2015-2022_jun2022/Municipal-Delitos-2015-2022_jun2022.csv')
file_zip
